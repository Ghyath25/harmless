/* Running the following example:
 *just call goil a first time using the command line:
 *goil --target=avr -g --templates=../../goil/templates/ firstAVR.oil
 *(COMPILER, LINKER and ASSEMBLER in OS section may be adapted to your 
 * specific install of avr cross-compiler)
 *
 *Then a Makefile is generated. Just type:
 *make
 *To clean the project, call:
 *make clean
 * It will remove all generated files, except the Makefile.
 */
OIL_VERSION = "2.5" : "test" ;

CPU test {

    OS config {
        STATUS = STANDARD;
        TRAMPOLINE_BASE_PATH = "../..";
        APP_NAME = "AVRTrampolineBinTest1";
        APP_SRC = "main.c";
        CFLAGS  = "-Wall -O0 -g -DF_CPU=16000000 -mmcu=at90can128"; 
        LDFLAGS = "-Wall -O0 -g -DF_CPU=16000000 -mmcu=at90can128";
        ASFLAGS = "-x assembler-with-cpp -Wall -O0 -g -DF_CPU=16000000 -mmcu=at90can128 -c ";	// Compiler en -O0
        COMPILER  = "avr-gcc";
        LINKER    = "avr-gcc";
        ASSEMBLER = "avr-gcc";
    } ;


    APPMODE std {
    };

	EVENT EV1{		MASK = 0x04; 
	};

    TASK startTask {
        PRIORITY = 5;
        AUTOSTART = TRUE {APPMODE = std;};
        ACTIVATION = 1;
        SCHEDULE = FULL;
        STACKSIZE = 256;
    };

    TASK secondTask {
        PRIORITY = 6;
        AUTOSTART = FALSE;
        ACTIVATION = 1;
        SCHEDULE = FULL;
        STACKSIZE = 256;
    };

	 TASK thirdTask {
        PRIORITY = 7;
        AUTOSTART = FALSE;
        ACTIVATION = 1;
        SCHEDULE = FULL;
        STACKSIZE = 45;
    };

	 TASK fourthTask {
        PRIORITY = 8;
        AUTOSTART = FALSE;
        ACTIVATION = 1;
        SCHEDULE = FULL;
        STACKSIZE = 256;
    };

	TASK eventTask{
        PRIORITY = 9;
        AUTOSTART = FALSE;
        ACTIVATION = 1;
        SCHEDULE = FULL;
        STACKSIZE = 256;
		 EVENT = EV1;
	};



 COUNTER SystemCounter {
  TICKSPERBASE = 10;
  MAXALLOWEDVALUE = 1000;
  MINCYCLE = 1;
  SOURCE = TIMER2_OVF_vect;
 };
 
};
